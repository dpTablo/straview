<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="EUC-KR">
    <title>spring boot template project</title>

    <script>
        /*<![CDATA[*/

        let stravaClientId = "[[ ${stravaClientId} ]]"
        let stravaAuthRedirectUrl = "[[ ${stravaAuthRedirectUrl} ]]"

        /*]]*/

        function redirectOAuthStarava() {
            let url = 'https://www.strava.com/oauth/authorize?'
                + 'client_id=' + stravaClientId
                + '&redirect_uri=' + stravaAuthRedirectUrl
                + '&response_type=code'
                + '&approval_prompt=auto'
                + '&scope=read_all'

            // console.log(url)
            document.location.href = url
        }
    </script>
</head>
<body>
    <h1>Strava OAuth2</h1>
    <button th:onclick="redirectOAuthStarava()">Strava ¿Œ¡ı</button>
    <form action="https://www.strava.com/oauth/authorize" method="get">
        <input type="hidden" name="client_id" th:value="${stravaClientId}" />
        <input type="hidden" name="redirect_uri" value="/straview/page/home" />
        <input type="hidden" name="response_type" value="code" />
        <input type="hidden" name="approval_prompt" value="auto" />
        <input type="hidden" name="scope" value="read" />
        <input type="hidden" name="state" value="" />
    </form>
</body>
</html>